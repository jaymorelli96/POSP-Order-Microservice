pipeline { 
    agent any 

    stages { 

		stage('jacoco') {
			steps {
			jacoco( 
			      execPattern: 'target/jacoco.exec',
			      classPattern: 'target/classes/com/jaymorelli/posp/order/test',
			      sourcePattern: '**/order/**',
			      inclusionPattern: '**/*.class'
			)
			}
		}

		stage('Sonar Scan') {
			steps {
				withSonarQubeEnv(installationName: 'sonar') { 
						bat './mvnw clean package org.sonarsource.scanner.maven:sonar-maven-plugin:3.9.0.2155:sonar'
				}	
		}
		
			
		
	}


    }

	post {
		always {
			cleanWs()
		}
	}

}
